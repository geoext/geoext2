<!DOCTYPE html>
<html debug="true">
  <head>
    <link rel="stylesheet" type="text/css" href="http://cdn.sencha.io/ext-4.1.0-gpl/resources/css/ext-all.css">
    <script type="text/javascript" src="http://openlayers.org/api/2.12-rc3/OpenLayers.js"></script>
    <script type="text/javascript" src="http://cdn.sencha.io/ext-4.1.0-gpl/ext-all-debug.js"></script>

    <script type="text/javascript">

        Ext.Loader.setConfig({
            enabled: true,
            disableCaching: false,
            paths: {
                "GeoExt": "../../../src/GeoExt"
            }
        });

        Ext.require([
            'GeoExt.grid.column.Symbolizer'
        ]);

        function test_renderer(t) {
            t.plan(4);

            var meta = {},
                value = {fillColor: "red", stroke: false},
                column = Ext.create('GeoExt.grid.column.Symbolizer'),
                markup = column.renderer(value, meta),
                el = document.createElement("div");
            document.body.appendChild(el);
            el.innerHTML = markup;

            t.eq(meta.css, "gx-grid-symbolizercol", "css class set correctly");

            t.delay_call(1, function() {
                var renderers = Ext.ComponentQuery.query('gx_symbolizercolumn');

                t.eq(renderers.length, 1, "Exactly one instance created");
                var renderer = renderers[0];

                t.ok(renderer instanceof GeoExt.grid.column.Symbolizer, "FeatureRenderer created");
                t.ok(el.childNodes.length > 0, "component added to markup");
                renderer.destroy();
                document.body.removeChild(el);
            });
        }
    </script>

  <body>
  </body>
</html>
